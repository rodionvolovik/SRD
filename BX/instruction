Диаметр графа - максимальное расстояние между вершинами для всех пар вершин 

Перебором счиатем диаметр при перестановке ребра и выбираем максимальное значение